# FinanceMCP SSE æœåŠ¡ç®¡ç†è„šæœ¬

æœ¬ç›®å½•åŒ…å«ç”¨äºç®¡ç† FinanceMCP SSE æœåŠ¡çš„è„šæœ¬é›†åˆã€‚

## ğŸ“ è„šæœ¬æ–‡ä»¶

| è„šæœ¬æ–‡ä»¶ | åŠŸèƒ½æè¿° |
|---------|---------|
| `manage-sse.sh` | ä¸»ç®¡ç†è„šæœ¬ï¼Œæä¾›ç»Ÿä¸€çš„å‘½ä»¤æ¥å£ |
| `start-sse.sh` | å¯åŠ¨ SSE æœåŠ¡ |
| `stop-sse.sh` | åœæ­¢ SSE æœåŠ¡ |
| `status-sse.sh` | æŸ¥çœ‹æœåŠ¡çŠ¶æ€ |
| `test-docker-sse.sh` | Docker SSE æµ‹è¯•è„šæœ¬ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨ä¸»ç®¡ç†è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# æŸ¥çœ‹å¸®åŠ©
./manage-sse.sh help

# å¯åŠ¨æœåŠ¡ï¼ˆé»˜è®¤ç«¯å£ 3101ï¼‰
./manage-sse.sh start

# åœ¨æŒ‡å®šç«¯å£å¯åŠ¨æœåŠ¡
./manage-sse.sh start 3102

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./manage-sse.sh status

# åœæ­¢æœåŠ¡
./manage-sse.sh stop

# é‡å¯æœåŠ¡
./manage-sse.sh restart

# æŸ¥çœ‹æ—¥å¿—
./manage-sse.sh logs

# å®æ—¶ç›‘æ§æ—¥å¿—
./manage-sse.sh logs -f

# æµ‹è¯•æœåŠ¡è¿æ¥
./manage-sse.sh test
```

### ä½¿ç”¨ç‹¬ç«‹è„šæœ¬

```bash
# å¯åŠ¨æœåŠ¡
./start-sse.sh [ç«¯å£å·]

# åœæ­¢æœåŠ¡
./stop-sse.sh

# æŸ¥çœ‹çŠ¶æ€
./status-sse.sh
```

## ğŸ”§ åŠŸèƒ½ç‰¹æ€§

### å¯åŠ¨è„šæœ¬ (`start-sse.sh`)
- âœ… è‡ªåŠ¨æ£€æŸ¥ç«¯å£å ç”¨
- âœ… è‡ªåŠ¨æ„å»ºé¡¹ç›®ï¼ˆå¦‚æœæ„å»ºæ–‡ä»¶ä¸å­˜åœ¨ï¼‰
- âœ… è¿›ç¨‹ ID ç®¡ç†
- âœ… æ—¥å¿—è®°å½•
- âœ… æœåŠ¡çŠ¶æ€éªŒè¯

### åœæ­¢è„šæœ¬ (`stop-sse.sh`)
- âœ… ä¼˜é›…åœæ­¢æœåŠ¡
- âœ… å¼ºåˆ¶æ¸…ç†æ®‹ç•™è¿›ç¨‹
- âœ… ç«¯å£é‡Šæ”¾æ£€æŸ¥
- âœ… PID æ–‡ä»¶æ¸…ç†

### çŠ¶æ€è„šæœ¬ (`status-sse.sh`)
- âœ… è¿›ç¨‹çŠ¶æ€æ£€æŸ¥
- âœ… ç«¯å£ä½¿ç”¨æƒ…å†µ
- âœ… æ„å»ºæ–‡ä»¶æ£€æŸ¥
- âœ… æ—¥å¿—æ–‡ä»¶ä¿¡æ¯
- âœ… ç»¼åˆçŠ¶æ€æŠ¥å‘Š

### ç®¡ç†è„šæœ¬ (`manage-sse.sh`)
- âœ… ç»Ÿä¸€å‘½ä»¤æ¥å£
- âœ… å‚æ•°ä¼ é€’
- âœ… é”™è¯¯å¤„ç†
- âœ… å¸®åŠ©ä¿¡æ¯

## ğŸ“Š æœåŠ¡ç«¯ç‚¹

å¯åŠ¨æœåŠ¡åï¼Œå¯é€šè¿‡ä»¥ä¸‹ç«¯ç‚¹è®¿é—®ï¼š

- **SSE ç«¯ç‚¹**: `http://localhost:[ç«¯å£]/sse`
- **æ¶ˆæ¯ç«¯ç‚¹**: `http://localhost:[ç«¯å£]/message`

## ğŸ“ æ—¥å¿—æ–‡ä»¶

- **æ—¥å¿—æ–‡ä»¶**: `.sse.log`
- **PID æ–‡ä»¶**: `.sse.pid`

## ğŸ³ Docker æ”¯æŒ

ä½¿ç”¨ Docker è¿è¡Œ SSE æœåŠ¡ï¼š

```bash
# æ„å»º Docker é•œåƒ
docker build -t finance-mcp-sse .

# è¿è¡Œ Docker å®¹å™¨
./test-docker-sse.sh

# æˆ–æ‰‹åŠ¨è¿è¡Œ
docker run -d \
  --name finance-mcp-sse-container \
  -p 3130:3100 \
  -e TUSHARE_TOKEN="your_token_here" \
  finance-mcp-sse
```

## ğŸ” æ•…éšœæ’é™¤

### æœåŠ¡æ— æ³•å¯åŠ¨
1. æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š`lsof -i :3101`
2. æ£€æŸ¥æ„å»ºæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š`ls -la build/index.js`
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼š`./manage-sse.sh logs`

### æœåŠ¡æ— æ³•åœæ­¢
1. æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€ï¼š`./manage-sse.sh status`
2. æ‰‹åŠ¨åœæ­¢è¿›ç¨‹ï¼š`./stop-sse.sh`
3. å¼ºåˆ¶æ¸…ç†ï¼š`pkill -f supergateway`

### ç«¯å£å†²çª
1. ä½¿ç”¨ä¸åŒç«¯å£ï¼š`./manage-sse.sh start 3102`
2. åœæ­¢å ç”¨ç«¯å£çš„æœåŠ¡
3. æ£€æŸ¥ç«¯å£ä½¿ç”¨ï¼š`lsof -i :ç«¯å£å·`

## ğŸ“‹ å¸¸ç”¨å‘½ä»¤

```bash
# å¿«é€Ÿå¯åŠ¨
./manage-sse.sh start

# æŸ¥çœ‹çŠ¶æ€
./manage-sse.sh status

# é‡å¯æœåŠ¡
./manage-sse.sh restart

# æµ‹è¯•è¿æ¥
./manage-sse.sh test

# å®æ—¶ç›‘æ§
./manage-sse.sh logs -f
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. ç¡®ä¿å·²å®‰è£… Node.js å’Œ npm
2. ç¡®ä¿å·²å®‰è£… supergatewayï¼š`npm install -g supergateway`
3. ç¡®ä¿é¡¹ç›®å·²æ„å»ºï¼š`npm run build`
4. ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç«¯å£æƒé™
5. å»ºè®®ä½¿ç”¨ä¸»ç®¡ç†è„šæœ¬ `manage-sse.sh` è¿›è¡Œæ‰€æœ‰æ“ä½œ
